(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5384:(e,s,t)=>{Promise.resolve().then(t.bind(t,5589))},5589:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var a=t(5155),l=t(2115);let r=[{name:"東京",lat:35.6895,lon:139.6917},{name:"大阪",lat:34.6937,lon:135.5023},{name:"札幌",lat:43.0618,lon:141.3545},{name:"仙台",lat:38.2682,lon:140.8694},{name:"名古屋",lat:35.1815,lon:136.9066},{name:"広島",lat:34.3853,lon:132.4553},{name:"福岡",lat:33.5904,lon:130.4017},{name:"沖縄",lat:26.2124,lon:127.6809}],n=e=>new Date(1e3*e).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit",timeZone:"Asia/Tokyo",hour12:!1});function i(e){let{initialWeatherData:s}=e,[t,i]=(0,l.useState)(r[0]),[o,c]=(0,l.useState)(s),[d,m]=(0,l.useState)(!1),[x,h]=(0,l.useState)(s?{sunriseTime:n(s.sys.sunrise),sunsetTime:n(s.sys.sunset)}:null),u=(0,l.useRef)(!0);(0,l.useEffect)(()=>{if(u.current){u.current=!1;return}let e="https://weather-app-six-gamma-44.vercel.app/";if(!e)return void console.error("API base URL is missing. Check NEXT_PUBLIC_API_BASE_URL.");!async function(){m(!0);try{console.log(t);let s=await fetch("".concat(e,"api/weather?lat=").concat(t.lat,"&lon=").concat(t.lon)),a=await s.json();console.log(a),s.ok?(c(a),h({sunriseTime:n(a.sys.sunrise),sunsetTime:n(a.sys.sunset)})):(console.error("API Error:",a.error),c(null))}catch(e){console.error("Failed to fetch weather data from client:",e),c(null)}finally{m(!1)}}()},[t]);let p=o?"https://openweathermap.org/img/wn/".concat(o.weather[0].icon,"@2x.png"):"";return(0,a.jsxs)("div",{className:"w-full max-w-4xl flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("label",{htmlFor:"city-select",className:"block mb-2 text-lg font-medium text-gray-300",children:"都市を選択:"}),(0,a.jsx)("select",{id:"city-select",onChange:e=>{let s=r.find(s=>s.name===e.target.value);s&&i(s)},value:t.name,className:"bg-white/10 backdrop-blur-md rounded-lg shadow-lg p-3 text-lg text-white border border-white/20",children:r.map(e=>(0,a.jsx)("option",{value:e.name,className:"bg-gray-800 text-white",children:e.name},e.name))})]}),d?(0,a.jsx)("p",{className:"text-xl",children:"天気情報を取得中..."}):o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur-lg rounded-3xl shadow-2xl p-8 mb-8 text-center border border-white/20 transform hover:scale-105 transition-transform duration-300 ease-in-out max-w-lg w-full",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-center md:justify-around space-y-4 md:space-y-0 md:space-x-8",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("img",{src:p,alt:o.weather[0].description,className:"w-32 h-32 mr-4 filter drop-shadow-md"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-5xl font-bold mb-2 leading-none",children:[o.main.temp,"\xb0C"]}),(0,a.jsx)("p",{className:"text-xl text-gray-300 capitalize",children:o.weather[0].description})]})]}),(0,a.jsxs)("div",{className:"text-left md:text-right",children:[(0,a.jsxs)("p",{className:"text-lg",children:["体感温度: ",o.main.feels_like,"\xb0C"]}),(0,a.jsxs)("p",{className:"text-lg",children:["最低気温: ",o.main.temp_min,"\xb0C"]}),(0,a.jsxs)("p",{className:"text-lg",children:["最高気温: ",o.main.temp_max,"\xb0C"]})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-4xl w-full",children:[(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl shadow-lg p-6 text-center border border-white/15 transform hover:scale-105 transition-transform duration-300 ease-in-out",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"湿度"}),(0,a.jsxs)("p",{className:"text-4xl font-bold text-blue-300",children:[o.main.humidity,"%"]})]}),(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl shadow-lg p-6 text-center border border-white/15 transform hover:scale-105 transition-transform duration-300 ease-in-out",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"風速"}),(0,a.jsxs)("p",{className:"text-4xl font-bold text-green-300",children:[o.wind.speed," m/s"]})]}),(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl shadow-lg p-6 text-center border border-white/15 transform hover:scale-105 transition-transform duration-300 ease-in-out",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"気圧"}),(0,a.jsxs)("p",{className:"text-4xl font-bold text-purple-300",children:[o.main.pressure," hPa"]})]}),(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl shadow-lg p-6 text-center border border-white/15 transform hover:scale-105 transition-transform duration-300 ease-in-out col-span-1 sm:col-span-2 lg:col-span-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-300 mb-2",children:"日の出 / 日の入り"}),(0,a.jsxs)("div",{className:"flex justify-around items-center text-xl font-bold",children:[(0,a.jsx)("p",{className:"text-yellow-300",children:null==x?void 0:x.sunriseTime}),(0,a.jsx)("span",{className:"text-gray-400",children:"|"}),(0,a.jsx)("p",{className:"text-orange-300",children:null==x?void 0:x.sunsetTime})]})]})]})]}):(0,a.jsx)("p",{className:"text-xl text-red-400",children:"天気情報の取得に失敗しました。"})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=5384)),_N_E=e.O()}]);